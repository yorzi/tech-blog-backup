
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>@yorzi</title>
  <meta name="author" content="Andy Wang">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://tech.wangyaodi.com/page3/index.html"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  
  <link href="/atom.xml" rel="alternate" title="@yorzi" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17239385-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/" style="color:red">@yorzi</a></h1>
  
    <h2>great people share knowledge</h2>
  
  <a href="https://github.com/yorzi/site_engine"><img style="position: absolute; top: 0; right: 0; border: 0;" src="/images/forkme.png" alt="Fork me on GitHub"></a>
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss email">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
    <li><a href="wangyaodi@gmail.com" rel="subscribe-email" title="subscribe via email">Email</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:tech.wangyaodi.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="http://blog.wangyaodi.com">Blog</a></li>
  <li><a href="http://about.me/wangyaodi">About Me</a></li>
  <li><a href="https://plus.google.com/108320517625960982177/about?hl=en" style="color:red">@yorzi</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">



  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/29/study-note-install-git1-7-1-on-centos5-5/">Study Note: Install Git1.7.1 on CentOS5.5</a></h1>
    
    
      <p class="meta">




<time datetime="2010-08-29 00:00:00 +0800" pubdate  updated >Aug 29<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p>Step 1. Install the dependencies</p>

<pre>
$ sudo yum -y install curl-devel expat-devel \
gettext-devel openssl-devel zlib-devel  
$ wget http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.13.1.tar.gz  
$ tar zxf libiconv-1.13.1.tar.gz  
$ cd libiconv-1.13.1  
$ ./configure prefix=/usr/local  
$ make  
$ sudo make install
</pre>


<p>Step 2. Install Git1.7.1</p>

<pre>
$ wget http://kernel.org/pub/software/scm/git/git-1.7.1.tar.gz  
$ tar zxf git-1.7.1.tar.gz  
$ cd  git-1.7.1  
$ ./configure prefix=/usr/local
$ make
$ sudo make install 
</pre>


<p>Step 3. You might get errors as:</p>

<pre>error while loading shared libraries: libiconv.so.2:\
cannot open shared object file: No such file or directory</pre>


<p>Then, you should do the following:</p>

<pre>
$ sudo vim /etc/ld.so.conf
# you should add online as "/usr/local/lib"
$ sudo /sbin/ldconfig
</pre>


<p>Done, try git &#8211;version, it&#8217;s successfully installed.</p>
</div>
  <footer>
    <a rel="full-article" href="/2010/08/29/study-note-install-git1-7-1-on-centos5-5/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/28/first-iphone-app-ielts-31-formulas/">First iPhone App : IELTS 31 Formulas</a></h1>
    
    
      <p class="meta">




<time datetime="2010-08-28 00:00:00 +0800" pubdate  updated >Aug 28<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p><a href="http://img.skitch.com/20100828-873u9f5mr8gmxt5r3jn8t4m7as.jpg"><img alt="" src="http://img.skitch.com/20100828-873u9f5mr8gmxt5r3jn8t4m7as.jpg" title="31 Formulas" class="aligncenter" width="688" height="514" /></a>
In last two month, I worked with our designer(<a href="http://www.lijiapeng.com">buzz</a>) for Idapted first iPhone App. We spent a lot time on releasing this app as Apple&#8217;s process is really awful to a first user. Well, everything was done in the last. Now our first iPhone App is available in Apple Store. It&#8217;s free in current version. you can install it from here: <a href="http://goo.gl/ht4p">http://goo.gl/ht4p</a>. It&#8217;s based on <a href="http://www.appcelerator.com/products/">Titanium 1.4</a>. so a big thanks to the brilliant <a href="http://www.appcelerator.com/company/leadership-team/">Appcelerator Team</a>.</p>

<p>We open sourced this app on our <a href="http://github.com/idapted/eq31formulas">github repos</a>. We also built a website for this app at <a href="http://www.31formulas.com">http://www.31formulas.com</a></p>

<p>Enjoy it and let us know if you have any feedback on it.</p>
</div>
  <footer>
    <a rel="full-article" href="/2010/08/28/first-iphone-app-ielts-31-formulas/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/27/where-optimization-happens/">Where Optimization Happens</a></h1>
    
    
      <p class="meta">




<time datetime="2010-08-27 00:00:00 +0800" pubdate  updated >Aug 27<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p>Jonathan just mentionedÂ <a href="http://www.idapted.com/blog/2010/08/16/small-details-big-gains/" target="_blank">small details and big gains</a> in his post days ago, I totally agree with him from technology perspective, meanwhile, I found more samples to support his points. Yeah, technology is born for changing people&#8217;s life, I call this kind of changes as Optimization.Optimization is happening everyday to Idapted Platform, as it&#8217;s one of most important way to become perfect.</p>

<p>In last week, our StudyCenter, the front end user interface system, was optimized in its registration flow. Previously, we have many registration channels for different partners. Our marketing department is mainly responsible for these registration channels, and update them frequently. Accordingly, technology team and sales team also need to cooperate. Here problem is, demands change more quickly than tech guys and sales system can follow up.</p>

<p>Now we refactor the control of registration flow, to re-think every departments&#8217; needs, we split the conditions for each department, after this improvement, people in different departments will not affect others, specially to tech guys, this is more flexible and maintainable. They will not messy all the situations up.</p>

<p>Another sample of optimization is that, we iterated many rounds of development to build a CRM system internally before, however, we integrated too many features inside the CRM, which were used by different departments. Because Idapted customers&#8217; accounts are increasing rapidly, the speed of whole system is getting slower and slower. Obviously, the CRM system needs optimization.</p>

<p>We finally split the CRM system in three parts which are used by different people, The independent and small system is well designed for certain users, that&#8217;s the key of this Optimization. It gains us faster system response and clearer business devision.</p>

<p>All in all, to serve learners better user experience, to improve internal working process or to increase system efficiency, all of these optimizations are about making things perfect. This is the belief of <a href="http://www.idapted.com">Idapted</a>.</p>
</div>
  <footer>
    <a rel="full-article" href="/2010/08/27/where-optimization-happens/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/26/install-sqlite3-ruby-on-centos/">Install Sqlite3-ruby on CentOS</a></h1>
    
    
      <p class="meta">




<time datetime="2010-08-26 00:00:00 +0800" pubdate  updated >Aug 26<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p>Normally you would get an error if you try to install or to update your sqlite3-ruby gems. But you need this gem when there is other dependence. Hereâs the solution to get it running:</p>

<p>Go to sqlite.org and get the amalgamation package or wget directly (below is my way):</p>

<pre>
# cd into my source tarball folder
cd /usr/src
# get the amalgation package
wget http://sqlite.org/sqlite-amalgamation-3.6.23.1.tar.gz
# unpack it
tar xvzf sqlite-amalgamation-3.6.23.1.tar.gz
# cd into the created folder
cd sqlite-amalgamation-3.6.23.1
# run configuration
./configure
# make and intall the package
make && sudo make install
</pre>


<p>After successfully install the installer will tell where the library files have been stored in. In my case this was â/usr/local/libâ.</p>

<p>So I can install the gem now with:</p>

<pre>
gem install sqlite3-ruby â âwith-sqlite3-include=/usr/local/include \
âwith-sqlite3-lib=/usr/local/lib
</pre>


<h1>getting this as a result</h1>

<p>Building native extensions. This could take a whileâ¦
Successfully installed sqlite3-ruby-1.3.1
1 gem installed</p>

<p>Ok, done.</p>
</div>
  <footer>
    <a rel="full-article" href="/2010/08/26/install-sqlite3-ruby-on-centos/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/25/iphone-app-debug-and-release-via-titanium/">iPhone App : Debug and Release Through Titanium</a></h1>
    
    
      <p class="meta">




<time datetime="2010-08-25 00:00:00 +0800" pubdate  updated >Aug 25<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p>Once people develop an iPhone App using <a href="http://www.appcelerator.com/">Titanium1.4</a>, they must be very happy when the App is running on iPhone simulator. They feel great until they decide to debug their app on their devices or even release their app to AppleAppStore. This happens specially to these who firstly do this. Why? There are many reasons that you will hate Apple during the debug or release process. I bat you are like me then.</p>

<p>Assume that: You&#8217;ve already finished coding an iPhone app in Titanium 1.4 framework. Now you want to install your app on your device. If you do this first time, guess what will happen to you? Let me tell you my story.</p>

<p>You will be blocked by Titanium certificates detections when you want to install your app to your device. see below image:</p>

<div class="thumbnail"><a href="http://skitch.com/yorzi/dut81/mail-1320x770"><img src="http://img.skitch.com/20100825-fuf9q1dac5ir21f5g4im2h93gi.jpg" alt="mail (1320Õ·70)" /></a><br /></div>


<br />


<p>Well, in order to become an iPhone developer, you should pay Apple for an iPhone Program Permission. My boss paid Apple for an iPhone Program Team permission, it cost him about one month to pass Apple&#8217;s approval. After that, he, as an admin agent iPhone developer, invited me as an iPhone developer member with admin permission. Here we had been running into issue for two days. Finally, we found that he only can invite my exist Apple ID as an iPhone developer, because I can&#8217;t finish a registration process after he invite me with a non-exist Apple ID. The evil is Apple indicates that, we should invite non-exist accounts as team members.</p>

<p>Now have I got the permission to debug my app on my iphone? Wait a moment. Actually I should be invited twice separately, one is for <a href="https://itunesconnect.apple.com/">iTunesconnect</a>. another one is for <a href="http://developer.apple.com/iphone/index.action">Provisioning Portal</a>(Dev Center). These two sites are different, only in Dev Center, I can config my provisioning profile, which is a main concept for releasing iPhone App or allowing to install App on certain devices. But in iTunesconnect, I need to release my app to iTunes/Apple App Store.</p>

<p>So far, I&#8217;ve got enough permission to debug the App on my own iPhone. But I am still unable to distribute my App to others&#8217; devices. How that happens? As an iPhone developer, I need to pass Titanium&#8217;s detection of several certificates. only after that, I can install app on my iPhone. (PS: if you want to test your app on Android, the only need is to connect your device.)</p>

<p>In following images, I will show you the steps through which you can pass all the Titanium detection of certificates.</p>

<div><a href="http://skitch.com/yorzi/dutdc/preparation-iphone-provisioning-portal-apple-developer"><img src="http://img.skitch.com/20100825-b8ne3uxkfenjthcgnscecb89t.jpg" alt="Preparation - iPhone Provisioning Portal - Apple Developer" /></a><br /></div>


<br />


<p>Then you will get the following files after your above configuration.</p>

<div class="thumbnail"><a href="http://skitch.com/yorzi/dutrp/users-andy-desktop-apple-developer-app"><img src="http://img.skitch.com/20100825-ds2k13epf4b7grcmabr89yk11r.jpg" alt="/Users/andy/Desktop/apple_developer/app" /></a><br /></div>


<br />


<p>After you import the above certificates to your keychain, you should see something similar in your Keychian.</p>

<div class="thumbnail"><a href="http://skitch.com/yorzi/dutds/keychain-access"><img src="http://img.skitch.com/20100825-ra2mqhmcu94pk7kuxcpa7c6i2g.jpg" alt="Keychain Access" /></a><br /></div>


<br />


<p>Finally, your Titanium will be the &#8220;ready status&#8221; for your debug and release on real device.</p>

<div class="thumbnail"><a href="http://skitch.com/yorzi/dutfb/titanium-developer-1.2.1"><img src="http://img.skitch.com/20100825-m5b6ugwjywb66qggswbsumsmfk.jpg" alt="Titanium Developer (1.2.1)" /></a><br /></div>


<br />


<p>The whole process might be painful unless you understand every concepts that Apple creates. I encounter problems when creating distribution provisioning profile. Only admin agent developer has permission to do so. Thus, you should ask admin agent for this provisioning profile, he can share this profile with a private key file, you import this key file to your Keychian, then you can distribute the app to whatever devices which is bundled into specific provisioning profile.</p>
</div>
  <footer>
    <a rel="full-article" href="/2010/08/25/iphone-app-debug-and-release-via-titanium/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/04/serialize-object-in-activerecord/">Study Note : Serialize Object in ActiveRecord</a></h1>
    
    
      <p class="meta">




<time datetime="2010-08-04 00:00:00 +0800" pubdate  updated >Aug 4<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><h2><span style="color: #444444; line-height: 24px; font-size: 16px;">Copied from <a href="http://api.rubyonrails.org/classes/ActiveRecord/Base.html#M001799" target="_blank">Ruby on Rails API doc</a>. Store here as a study notes for myself.

Active Record canÂ <a href="Base.html#M001799">serialize</a> any object in textÂ <a href="Base.html#M001809">columns</a> using YAML. To do so, you must specify this with a call to the class methodÂ <tt><a href="Base.html#M001799">serialize</a></tt>. This makes it possible to store arrays, hashes, and other non-mappable objects without doing any additional work. Example:</span></h2>


<pre>  class User &lt; ActiveRecord::Base
    serialize :preferences
  end

  user = User.create(:preferences =&gt; { "background" =&gt; "black", "display" =&gt; large })
  User.find(user.id).preferences # =&gt; { "background" =&gt; "black", "display" =&gt; large }</pre>


<p>You can also specify a class option as the second parameter thatâll raise an exception if a serialized object is retrieved as a descendant of a class not in the hierarchy. Example:</p>

<pre>  class User &lt; ActiveRecord::Base
    serialize :preferences, Hash
  end

  user = User.create(:preferences =&gt; %w( one two three ))
  User.find(user.id).preferences    # raises SerializationTypeMismatch</pre>

</div>
  <footer>
    <a rel="full-article" href="/2010/08/04/serialize-object-in-activerecord/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/08/04/calculate-results-vs-store-result-sets/">Calculate Results vs. Store Result Sets</a></h1>
    
    
      <p class="meta">




<time datetime="2010-08-04 00:00:00 +0800" pubdate  updated >Aug 4<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p>Firstly, what&#8217;s the results in title? For example, the results may be learners who will be alive in coming two weeks, or the results may be study times of one learner, etc. Generally, results should be some data coming from analyzing other data.</p>

<p>Here my question is, how can we get certain results much faster and easily?</p>

<p><strong>Case 1:</strong>
We want to pick up a name list, all people in the list should be under certain condition, say, condition A, condition B, condition C, so normally, we just select the results which obey the rule(condition). Right? It depends.</p>

<p>If name list is always dynamically different in condition A,B,C, it&#8217;s really hard to store the results set, we have to calculate instantly to make sure the results is accurate.</p>

<p>If name list is very difficult to figure out in condition A,B,C, we should store the stable part of the result set, so that we will not get stuck when calculate tons of data very time.</p>

<p><strong>Case 2.</strong>
We want to show study times of a learner, how can we do that? Should we store the study times as one attributor of study record or should we just make one study record as one-time study? Obviously, it depends on the complication of study record and the definition of one-time study.</p>

<p>In our case, one study record is instantly changed when it&#8217;s in different status, so storing study times in study record is not a good idea because the results might be locked when status changes. But if we calculate study times based on its status, it will be more reliable and accurate. and also it will not be locked when status is with exception.</p>

<p><strong>Conclusion:</strong>
To store result set, is a way to cache results, but some times it&#8217;s not easy to maintain the result sets, for instance, if there are too many conditions when getting a results set, it&#8217;s always in heavy load to update result sets, you have to listen to every condition level changes. If the situation is complex, remember to cache your result set and maintain it carefully.</p>

<p>To calculate results instantly lets you ignore the real data, you just need to use the rule carefully, that will be more accurate, because you very time select what the rule defines. However the disadvantage is, when the data sets is large, you have to pay more to do that instantly, so you want to do a cron job or just cache the stable part of previous result sets.</p>
</div>
  <footer>
    <a rel="full-article" href="/2010/08/04/calculate-results-vs-store-result-sets/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/07/30/study-notes-passenger-capistrano-nginx-rails-2-3-4-ubuntu-9-04-10-steps/">Study Notes: Passenger + Capistrano + Nginx + Rails 2.3.4 + Ubuntu 9.04 (10 Steps)</a></h1>
    
    
      <p class="meta">




<time datetime="2010-07-30 00:00:00 +0800" pubdate  updated >Jul 30<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p><strong><em>This post is just copied from </em></strong><a href="http://rustammamedov.wordpress.com/2009/12/27/capistrano-nginx-mongrel-deployment/"><strong><em>this page</em></strong></a><strong><em>. As a study notes, I re-share this manual here. Please check out original one if you wanna have a whole view of other involving topics. Thanks to the </em></strong><a href="http://rustammamedov.wordpress.com/"><strong><em>author</em></strong></a><strong><em> :)</em></strong></p>

<div>
<div>
<ol>
    <li>Install capistrano gem. if you useÂ <a href="http://yehudakatz.com/2009/11/03/using-the-new-gem-bundler-today">bundler</a> you need to add just one line to Gemfile
<code>
gem "capistrano"
</code>
and then run
<code>gem bundle
</code></li>
    <li>after capistrano installed you need to make Capfile and default deploy.rb, run such from the root of your application
<code>capify .</code></li>
    <li>create user for deployments in remote machine (letâs say âdeployâ user)
<code>adduser deploy</code></li>
    <li>add sudo privileges to this user. add one line in your /etc/sudoers file
<code>deploy ALL=(ALL) NOPASSWD: ALL</code></li>
    <li>adjust deploy.rb for you. I used example from thisÂ <a href="http://jimneath.org/2008/05/10/using-capistrano-with-passenger-mod_rails/">link</a>
<code lang="ruby">
# Application
set :application, "test"
set :deploy_to, "/var/www/#{application}"
#   Settings
default_run_options[:pty] = true
set :use_sudo, true
#   Servers
set :user, "deploy"
set :domain, "rustam.example.com"
server domain, :app, :web
role :db, domain, :primary =&gt; true
#   Subversion
set :repository, "http://www.rustam.example.com"
set :svn_username, "rustam"
set :svn_password, "password"
set :checkout, "export"
#   Passenger
namespace :passenger do
desc "Restart Application"
task :restart do
run "touch #{current_path}/tmp/restart.txt"
end
end
after :deploy, "passenger:restart"
</code>
to understand how it works â readÂ <a href="http://www.capify.org/index.php/Capistrano">this link</a></li>
    <li>if you donât use bundler, skip it. Otherwise, it will be usefull to add such piece of code to your deploy.rb file (fromÂ <a href="http://gist.github.com/244420">Richieâs post</a>)
<code lang="ruby">
# bundler
namespace :bundler do
  task :install do
    run("gem install bundler --source=http://gemcutter.org")
  end
  
  task :symlink_vendor do
  shared_gems = File.join(shared_path, 'vendor/bundler_gems')
  release_gems = "#{release_path}/vendor/bundler_gems/"
    %w(cache gems specifications).each do |sub_dir|
      shared_sub_dir = File.join(shared_gems, sub_dir)
      run("mkdir -p #{shared_sub_dir} && mkdir -p #{release_gems} && ln -s #{shared_sub_dir} #{release_gems}/#{sub_dir}")
    end
  end

  task :bundle_new_release do
    bundler.symlink_vendor
    rails_env = variables[:rails_env] || 'production'
    run("cd #{release_path} && gem bundle --only #{rails_env}")
  end
end

after 'deploy:update_code', 'bundler:bundle_new_release'
</code>
it will bundle all production gems to your bundler_gems path</li>
    <li>ask Capistrano to create set of folders for deployments in the remote machine
<code>cap deploy:setup</code></li>
    <li>ask capistrano to check all remote folders:
<code>cap deploy:check</code>
it will return to you all problems that you have with both locale/remote machines â structure of folders/permissions etc. you can get something like this:
<code>
The following dependencies failed. Please check them and try again:
--&gt; You do not have permissions to write to `/var/www'. (rustam.example.com)
--&gt; You do not have permissions to write to `/var/www/releases'. (rustam.example.com)
</code>
When youâll fix everything, youâll get such:
<code>You appear to have all necessary dependencies installed</code>
it means that youâre finished with capistrano configs</li>
    <li>you need to install passenger and nginx module for passenger in your remote machine according toÂ <a href="http://blog.phusion.nl/2009/04/16/phusions-one-year-anniversary-gift-phusion-passenger-220/">this</a>
<code>
sudo gem install passenger
sudo passenger-install-nginx-module</code>
the second command will tell you how to configure Nginx and to deploy rails application.
it will create Nginx configuration file for you:
<code>/opt/nginx/conf/nginx.conf)</code>
you need to change server block there
<code>
server {
listen 80;
server_name rustam.example.com;
root /var/www/current/public; # &lt;--- notice the 'public' part
passenger_enabled on; # &lt;--- don't forget this!li
}</code>
everything is finished for passenger and nginx!</li>
    <li>you can start deploy you app!
<code>cap deploy:update</code> â copies your project to remote machine and updates symlinks
<code>cap passenger-restart</code> â will start application</li>
FYIÂ <code>sudo /opt/nginx/sbin/nginx</code> starts nginx in the remote machine
    <li><strong>Extra step</strong>: if youâre using bundler and usedÂ <a href="http://yehudakatz.com/2009/11/03/using-the-new-gem-bundler-today/">Yehudaâs link to run it</a>(like meÂ <img src="http://s.wordpress.com/wp-includes/images/smilies/icon_smile.gif" alt=":)" /> ), youâll have a problem with preinitializer. I usedÂ <a href="http://tomafro.net/2009/11/a-rails-template-for-gem-bundler">Tom Wardâs solution</a> to fix it
i.e. put only such line to preinitializer.rb
<code>require File.expand_path(File.join(File.dirname(__FILE__), "..", "gems", "environment"))</code>
and add such piece of code just after loading boot
<code>
# Hijack rails initializer to load the bundler gem
#environment before loading the rails environment.
Rails::Initializer.module_eval do
alias load_environment_without_bundler load_environment
def load_environment
Bundler.require_env configuration.environment
load_environment_without_bundler
end
end
</code></li>
</ol>
Links with detailed description:
<ul>
    <li><a title="http://wiki.zhekov.net/nginx" href="http://wiki.zhekov.net/nginx">nginx</a></li>
    <li><a title="http://gautamrege.wordpress.com/2009/11/10/capistrano-nginx-thin-deployment-on-linode" href="http://gautamrege.wordpress.com/2009/11/10/capistrano-nginx-thin-deployment-on-linode">capistrano-nginx-thin-deployment-on-linode</a></li>
    <li><a title="http://74.125.95.132/search?q=cache:NyrJDYo75rAJ:www.capify.org/index.php/From_The_Beginning+capistrano+from+the+beginning&amp;cd=2&amp;hl=en&amp;ct=clnk&amp;gl=us&amp;client=firefox-a" href="http://74.125.95.132/search?q=cache:NyrJDYo75rAJ:www.capify.org/index.php/From_The_Beginning+capistrano+from+the+beginning&amp;cd=2&amp;hl=en&amp;ct=clnk&amp;gl=us&amp;client=firefox-a">Capistrano from the beginning</a></li>
    <li><a title="http://www.viget.com/extend/building-an-environment-from-scratch-with-capistrano-2/" href="http://www.viget.com/extend/building-an-environment-from-scratch-with-capistrano-2/">capistrano + passenger</a></li>
    <li><a title="http://jimneath.org/2008/05/10/using-capistrano-with-passenger-mod_rails/" href="http://jimneath.org/2008/05/10/using-capistrano-with-passenger-mod_rails/">capistrano + passenger + mod_rails</a></li>
    <li><a title="http://www.rubyinside.com/28_mod_rails_and_passenger_resources-899.html" href="http://www.rubyinside.com/28_mod_rails_and_passenger_resources-899.html">28 links howto passenger + capistrano</a></li>
    <li><a title="http://blog.phusion.nl/2009/04/16/phusions-one-year-anniversary-gift-phusion-passenger-220/" href="http://blog.phusion.nl/2009/04/16/phusions-one-year-anniversary-gift-phusion-passenger-220/">passenger + nginx</a></li>
    <li><a title="http://www.modrails.com/documentation/Users%20guide%20Nginx.html" href="http://www.modrails.com/documentation/Users%20guide%20Nginx.html">nginx guide for passenger</a></li>
</ul>
</div>
</div>

</div>
  <footer>
    <a rel="full-article" href="/2010/07/30/study-notes-passenger-capistrano-nginx-rails-2-3-4-ubuntu-9-04-10-steps/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/07/30/start-working-on-titanium/">Start Working on Titanium</a></h1>
    
    
      <p class="meta">




<time datetime="2010-07-30 00:00:00 +0800" pubdate  updated >Jul 30<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p>Been working on Titanium for a while, I find a must read PPT to guide you smoothly getting start on <a href="http://developer.appcelerator.com/get_started">Titanium Mobile Development</a>.</p>

<div style="width:425px" id="__ss_4793534"><strong style="display:block;margin:12px 0 4px"><a href="http://www.slideshare.net/kwhinnery/oscon-titanium-tutorial" title="OSCON Titanium Tutorial">OSCON Titanium Tutorial</a></strong><object id="__sse4793534" width="425" height="355"><param name="movie" value="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=titaniumtutorial-100719215658-phpapp02&stripped_title=oscon-titanium-tutorial" /><param name="allowFullScreen" value="true"/><param name="allowScriptAccess" value="always"/><embed name="__sse4793534" src="http://static.slidesharecdn.com/swf/ssplayer2.swf?doc=titaniumtutorial-100719215658-phpapp02&stripped_title=oscon-titanium-tutorial" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="425" height="355"></embed></object><div style="padding:5px 0 12px">View more <a href="http://www.slideshare.net/">presentations</a> from <a href="http://www.slideshare.net/kwhinnery">Kevin Whinnery</a>.</div></div>

</div>
  <footer>
    <a rel="full-article" href="/2010/07/30/start-working-on-titanium/">Read on &rarr;</a>
  </footer>


  </article>


  <article>
    
  <header>
    
      <h1 class="entry-title"><a href="/2010/07/28/rails3-app-gem-stack/">Rails3 App Gem Stack</a></h1>
    
    
      <p class="meta">




<time datetime="2010-07-28 00:00:00 +0800" pubdate  updated >Jul 28<span>th</span>, 2010</time>


</p>
    
  </header>


  <div class="entry-content"><p>Rails3 RC1 was released yesterday, that&#8217;s really awesome, I can&#8217;t help experimenting a sample of Rails3 new features. I want to share my Gemfile to list all application gem stack, which may be useful for those who don&#8217;t wanna create wheels themselves. Below is the list:
<code lang='ruby'></p>

<h1>Bundle edge Rails instead:</h1>

<p>gem 'rails', :git => 'git://github.com/rails/rails.git'</p>

<p>gem 'mysql'</p>

<h1>devise for auth</h1>

<p>gem 'devise', '1.1.rc2'</p>

<h1>show_for is a helper for showing objects</h1>

<p>gem 'show_for'</p>

<h1>pageinate</h1>

<p>gem 'will_paginate', '3.0.pre'</p>

<h1>A set of responders modules to dry up your Rails 3 app</h1>

<p>gem 'responders'</p>

<h1>Cron job in Rails</h1>

<p>gem 'whenever', :git => 'git://github.com/javan/whenever.git'</p>

<h1>for creating navigations</h1>

<p>gem 'simple-navigation', '2.6.0'</p>

<h1>for backup db to s3/remote server</h1>

<p>gem 'backup', '2.3.2.pre3'</p>

<h1>Editor plugin</h1>

<p>gem 'tiny_mce', '0.1.4'</p>

<h1>background job</h1>

<p>gem "delayed_job","1.8.4"</p>

<h1>role based access control</h1>

<p>gem "cancan"</p>

<h1>simple search on models</h1>

<p>gem "searchlogic"</p>

<h1>full-text search solution</h1>

<p>gem 'thinking-sphinx', '2.0.0.rc1', :require => 'thinking_sphinx'</p>

<h1>Use unicorn as the web server</h1>

<p>gem 'unicorn'</p>

<h1>Deploy with Capistrano</h1>

<p>gem 'capistrano'</p>

<h1>To use debugger</h1>

<p>gem 'ruby-debug'</p>

<h1>Bundle the extra gems:</h1>

<h1>gem 'bj'</h1>

<p>gem 'nokogiri', '1.4.1'</p>

<h1>gem 'sqlite3-ruby', :require => 'sqlite3'</h1>

<p>gem 'aws-s3', :require => 'aws/s3'</p>

<h1>Bundle gems for certain environments:</h1>

<p>gem 'rspec', :group => :test
group :test do
  gem 'webrat'
end
</code></p>

<p>If you wanna know whether a plugin/gem is available for Rails3, just check out this site: <a href="http://www.railsplugins.org/">http://www.railsplugins.org/</a></p>
</div>
  <footer>
    <a rel="full-article" href="/2010/07/28/rails3-app-gem-stack/">Read on &rarr;</a>
  </footer>


  </article>

<nav role="pagination">
  <div>
    
      <a class="prev" href="/page4/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
      <a class="next" href="/page2/">Newer &rarr;</a>
    
  </div>
</nav>

<script type="text/javascript">
    var disqus_shortname = 'refactoringthoughts';
    (function () {
      var s = document.createElement('script'); s.async = true;
      s.type = 'text/javascript';
      s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

</div>
<aside role=sidebar>
  
    <section>
  <img src="https://img.skitch.com/20110814-rrw7uufrh7wc6eugk6yf4163qb.jpg"></img>
  <p>Hi, I&#8217;m <b style="color:red">Andy Wang</b>.<br />
     I live in <b style="color:red">Beijing</b>, China. <br />
     I&#8217;m a <b style="color:red">Sr. Ruby/Rails Engineer</b> at <a href="http://intridea.com">Intridea</a>.</p>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/05/23/install-jenkins-and-set-up-jenkins-ci-for-rails-projects/">Install Jenkins and Set Up Jenkins CI for Rails Projects</a>
      </li>
    
      <li class="post">
        <a href="/2013/04/27/map_basics_for_noob/">Map basics for noob</a>
      </li>
    
      <li class="post">
        <a href="/2013/01/19/downloadable-svg-in-png-format/">Downloadable SVG in PNG Format</a>
      </li>
    
      <li class="post">
        <a href="/2012/10/22/run-a-static-website-on-heroku-for-free/">Run a Static Website on Heroku for Free</a>
      </li>
    
      <li class="post">
        <a href="/2011/08/14/now-my-blog-is-running-on-octopress/">Now My Blog Is Running on Octopress</a>
      </li>
    
      <li class="post">
        <a href="/2011/06/14/riding-on-rails3-with-full-stack-of-gems/">Riding on Rails3 with full stack of Gems</a>
      </li>
    
      <li class="post">
        <a href="/2011/03/21/weekly-updates-javascript-rocks/">Weekly Updates : Javascript Rocks!</a>
      </li>
    
      <li class="post">
        <a href="/2011/03/09/settimeout-and-setinterval/">JS note: setTimeout and setInterval</a>
      </li>
    
  </ul>
  <p>>>>>>>>>  <a style="color:red" href="/blog/archives">More Posts in Archives</a></p>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("yorzi", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/yorzi" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @yorzi</a>
  
</section>


<section>
  <h1>On Delicious</h1>
  <script type="text/javascript" src="http://feeds.delicious.com/v2/js/yorzi?title=&count=3&sort=date&extended"></script>
  <p><a href="http://delicious.com/yorzi">My Delicious Bookmarks &raquo;</a></p>
</section>


  
</aside>

    </div>
  </div>
  <footer><p>
  Copyright &copy; 2013 - Andy Wang -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
