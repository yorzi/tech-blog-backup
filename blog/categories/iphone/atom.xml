<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: iPhone | @yorzi]]></title>
  <link href="http://yorzi.github.com/blog/categories/iphone/atom.xml" rel="self"/>
  <link href="http://yorzi.github.com/"/>
  <updated>2012-10-23T14:47:55+08:00</updated>
  <id>http://yorzi.github.com/</id>
  <author>
    <name><![CDATA[Andy Wang]]></name>
    <email><![CDATA[wangyaodi@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[SearchBar in Titanium]]></title>
    <link href="http://yorzi.github.com/2010/07/16/searchbar-in-titanium/"/>
    <updated>2010-07-16T00:00:00+08:00</updated>
    <id>http://yorzi.github.com/2010/07/16/searchbar-in-titanium</id>
    <content type="html"><![CDATA[<p>In this post, I will guide you to use SearchBar in TableView when your development is based on Titanium.</p>

<p><strong>Keywords</strong>: <em>Titanium, TableView, TableViewRow, SearchBar</em></p>

<p><strong>Step 1</strong>: Create a table view row datas for your content list.
<code lang="javascript">
// create the rest of the rows
var data = [];
for (var c=0;c&lt;rowCount;c++)
{</p>

<pre><code>var row = Ti.UI.createTableViewRow();
row.backgroundImage = '../images/row_bg.png';
row.selectedBackgroundImage = '../images/row_bg_selected.png';
row.height = 90;
row.url = "formulas_show.js";
row.id = id;
row.className = 'datarow';
row.filter = "the data you want to search";  // here you will set the filter content which will be searched.
row.clickName = 'row';

data.push(row);
</code></pre>

<p>}
</code></p>

<p><strong>Step 2</strong>: Create a search bar.
<code lang="javascript">
// CREATE SEARCH BAR
var search = Titanium.UI.createSearchBar({</p>

<pre><code>barColor:'#385292', 
showCancel:false
</code></pre>

<p>});</p>

<p>search.addEventListener('change', function(e)
{
   e.value; // search string as user types
});
search.addEventListener('return', function(e)
{
   search.blur();
});
search.addEventListener('cancel', function(e)
{
   search.blur();
});
</code></p>

<p><strong>Step 3</strong>: Create a table view for your content list.
<code lang="javascript">
// create table view
tableView = Titanium.UI.createTableView({</p>

<pre><code>data:data, // here will be the data array
search:search, //here will set search bar
filterAttribute:'filter', //here is the search filter which appears in TableViewRow as an attribute(you can define it in other name)
backgroundColor:'white'
</code></pre>

<p>});
</code></p>

<p>Ok, now you can add search bar for table view content list. as a reminder, you should add event listener for the table view object, but the click event should be bundled with the "row", so that you can search and click the search result linking to target window.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Titanium : DB Synchronization]]></title>
    <link href="http://yorzi.github.com/2010/07/14/titanium-db-synchronization/"/>
    <updated>2010-07-14T00:00:00+08:00</updated>
    <id>http://yorzi.github.com/2010/07/14/titanium-db-synchronization</id>
    <content type="html"><![CDATA[<p><strong>Header Notes:</strong>
1. Static data should be released with app, just don't do db synchronization.
2. Just embed sync background when ppl looking at some instructions/tips etc.
3. Don't update db all the time.</p>

<p>App Start:
<em><strong>app.js</strong></em>
<code lang='javascript'>
// Localization libs
Ti.include('l10n/l10n.js');
Ti.include('l10n/l10n_dialog.js');
Ti.include('l10n/l10n_format.js');</p>

<p>var db = Titanium.Database.install('eq31formulas.db', 'eq31formulas');</p>

<p>// Ti.include('content/tab_formula.js')</p>

<p>// this sets the background color of the master UIView (when there are no windows/tab groups on it)
Titanium.UI.setBackgroundColor('#000');</p>

<p>// create tab group
var tabGroup = Titanium.UI.createTabGroup();</p>

<p>//
// create tab for tips
//
Ti.include('content/tab_tips.js');</p>

<p>//
// create tab for weibo
//
Ti.include('content/tab_weibo.js');</p>

<p>//
// create tab for formulas
//
Ti.include('content/tab_formulas.js');</p>

<p>// create tab for lang settings
var win_setting = Ti.UI.createWindow({</p>

<pre><code>title:_('tab_settings')
</code></pre>

<p>});</p>

<p>var tab_setting = Ti.UI.createTab({</p>

<pre><code>icon:'images/nav_icon_setting.png',
title:_('tab_settings'),
window:win_setting
</code></pre>

<p>});</p>

<p>var data = [];
var ACTION_LANGUAGE = 0;</p>

<p>var row = Ti.UI.createTableViewRow({
  title: _('language'),
  hasChild: true,
  action: ACTION_LANGUAGE,
  className: 'control'
});</p>

<p>var label_lang = Ti.UI.createLabel({
  textAlign: 'right',
  right: 10,
  width: 175,
  color: '#385487',
  font: {fontSize: 16},
  text: L10N.getLanguageDisplayName()
});</p>

<p>row.add(label_lang);</p>

<p>data.push(row);</p>

<p>// create table view</p>

<p>var tableview = Ti.UI.createTableView({
  data:data,
  style:Ti.UI.iPhone.TableViewStyle.GROUPED
});</p>

<p>// add table click listener</p>

<p>tableview.addEventListener('click', function(e) {
  var rowdata = e.rowData;
  if (rowdata.action == ACTION_LANGUAGE) {</p>

<pre><code>// show language selection dialog

L10N.showLanguageSelectionDialog();
</code></pre>

<p>  }
});</p>

<p>win_setting.add(tableview);</p>

<p>//
//  add tabs
//
tabGroup.addTab(tab_formulas);<br/>
tabGroup.addTab(tab_tips);<br/>
tabGroup.addTab(tab_weibo);
tabGroup.addTab(tab_setting);</p>

<p>var omodes = [</p>

<pre><code>Titanium.UI.PORTRAIT,
Titanium.UI.UPSIDE_PORTRAIT,
Titanium.UI.LANDSCAPE_LEFT,
Titanium.UI.LANDSCAPE_RIGHT
</code></pre>

<p>];</p>

<p>win_formulas.orientationModes = omodes;
win_tips.orientationModes = omodes;
win_weibo.orientationModes = omodes;</p>

<p>Titanium.Analytics.featureEvent('app.feature.blah',{product:'killer'});</p>

<p>tabGroup.addEventListener('open',function()
{</p>

<pre><code>Titanium.UI.setBackgroundColor('#fff');
</code></pre>

<p>});</p>

<p>tabGroup.setActiveTab(0);
tabGroup.open({</p>

<pre><code>transition:Titanium.UI.iPhone.AnimationStyle.FLIP_FROM_LEFT
</code></pre>

<p>});</p>

<p>// add top level introduction of 31 formulas
Ti.include("introduction.js");</p>

<p>// synchronize db
Ti.include("synchronize.js");</p>

<p></code></p>

<p>Prepare data while launching the app:
<em><strong>synchronize.js</strong></em>
<code lang="javascript">
(function(){</p>

<pre><code>var db = Titanium.Database.open('eq31formulas');

    // JS test
var currentTime = new Date();
var month = currentTime.getMonth() + 1;
var day = currentTime.getDate();
var year = currentTime.getFullYear();

Titanium.API.info('JS TIME:' + currentTime);
// lesson = db.execute('SELECT * FROM LESSONS ORDER BY ID LIMIT 1')

if (Titanium.Network.online == true)
{
    Titanium.API.info('Online--update lessons!');
    var src = 'http://www.veecue.com/eq31formulas/data_service/lessons';
    c = Titanium.Network.createHTTPClient();

    c.onload = function()
    {   
        var json_data = JSON.parse(this.responseText);

        Titanium.API.info('lesson count:' + json_data.length);

        for(var i=0; i&lt;json_data.length; i++)
        {
            Titanium.API.info("updating lesson:" + i);
            var record = json_data[i].lesson;
            // add different control for UPDATE or INSERTION here
            db.execute('CREATE TABLE IF NOT EXISTS LESSONS (ID INTEGER, TITLE TEXT, AIMS TEXT, ANSWER_ORDER TEXT, LANG_STEP TEXT, MODEL_ANSWER TEXT)');
            db.execute('DELETE FROM LESSONS');
            db.execute("INSERT INTO LESSONS (ID, TITLE, AIMS, ANSWER_ORDER, LANG_STEP, MODEL_ANSWER) VALUES(?,?,?,?,?,?)", record.id, record.title, record.aims, record.answer_order, record.lang_step, record.model_answer);   
        }
    };

    // open the client
    c.open('GET', src);

    // send the data
    c.send();
}
else
{
    Titanium.API.info('Offline--');
    return;
}   
</code></pre>

<p>})();
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iPhone/Android application based on Titanium and HTML5]]></title>
    <link href="http://yorzi.github.com/2010/06/30/iphone-android-application-based-on-titanium-and-html5/"/>
    <updated>2010-06-30T00:00:00+08:00</updated>
    <id>http://yorzi.github.com/2010/06/30/iphone-android-application-based-on-titanium-and-html5</id>
    <content type="html"><![CDATA[<p>After a two-day experiment on <a href="http://www.appcelerator.com/">Titanium framework</a> and HTML5 technology, I finally found, we can quickly move into iPhone/iPad application development if we have enough extra time to refactor our Rails core application into HTML5 version.</p>

<p>I've made a Titanium based app demo to show how to structure the application according to our current system. Titanium framework includes plenty of powerful <a href="http://developer.appcelerator.com/doc/kitchensink">APIs</a> for us to generate cool "application container", then we embed our content/system into this container. I think the Titanium can be organized clearly if we have clearly structured Rails/HTML5 application.</p>

<p>Talking about HTML5, I just want to share with everyone the resources I found, Google just started a HTML5 support website named <a href="http://www.html5rocks.com/">html5rocks</a>, it has a <a href="http://www.html5rocks.com/resources.html">html5 resources page</a> where it includes almost every single HTML5 resource website I found in last two days. (html5rocks was born blocked..)</p>

<p>PS, originally I want to show how I made a Titanium based iPhone application, but I found appcelerator really does a great job to help people getting started with Titanium, so I just quote it as below:</p>

<blockquote>Titanium translates your hard won web skills into native applications that perform and look just like they were written in Objective-C [iPhone and iPad] or Java [Android]. With over 300 APIs, a thriving developer community, and the support you need, you can build applications that are more social, local, media rich, interactive, and extensible. <a href="http://developer.appcelerator.com/doc/mobile/get_started">Getting Started with Titanium Mobile</a>. All these information is clear and in detailed. Appcelerator does a great job to guide you to start.</blockquote>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[update iPhone to 3.1.2]]></title>
    <link href="http://yorzi.github.com/2010/04/12/update-iphone-to-3.1.2/"/>
    <updated>2010-04-12T00:00:00+08:00</updated>
    <id>http://yorzi.github.com/2010/04/12/update-iphone-to-3.1.2</id>
    <content type="html"><![CDATA[<p>我的一代小i从08年挺到现在，昨天刷机至3.1.2OS以后焕然一新，随后爱不释手，一直玩到深夜。不管是从性能还是整体的感觉，这个版本的一代iphone真是帅到极致。</p>

<p>两年前夏天的一个下午，我从两点到凌晨两点，一直再研究刷机，即使到现在我也一直弄不明白破解和越狱有什么区别，那次我花了12个小时，开始对复杂的刷机过程心生惧怕。随后过了大概一年，就是现在的一年之前，很好奇iphone能不能在ubuntu上面同步itunes，结果机子就横在哪里，不得已，花了大概三个小时刷机并且试图回复所有的联系人和照片，即便那次更新成功，心里仍然留下了不小的伤痕，这叫一个麻烦。更要命的是后来的机子一直不稳定，经常crash。</p>

<p>而这一次，我仅仅用了30分钟，并且在这三十分钟里面我还解决了一个比较奇怪的问题，感叹科技的进步，渐渐的，生活只需要一个action，action背后的逻辑似乎越来越不需要暴露出来。</p>

<p>刷机TIPS: 解决刷机时候1604错误的方法。(同时秀一下新刷的iphone下面使用twitbird的截图 :))
<a href="http://blog.wangyaodi.com/wp-content/uploads/2010/04/20100412.jpg"><img src="http://blog.wangyaodi.com/wp-content/uploads/2010/04/20100412.jpg" alt="" title="TwitBird" width="320" height="480" class="aligncenter size-full wp-image-452" /></a></p>
]]></content>
  </entry>
  
</feed>
